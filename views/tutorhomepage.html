<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

     <!-- Vue.js 3 CDN -->
     <script src="https://unpkg.com/vue@next"></script>
     <!-- Axios CDN -->
     <script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>
     <!-- Boostrap -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha384-f56P1Kd4l5ndav7X55fqd9HgHfPBHHGk4ufa7XDDQYDx5gO3bIccE+Uy6c9U+fcg" crossorigin="anonymous"> -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
          .tick-cross-icon {
        font-size: 20px; /* Adjust the size as needed */
        color: green; /* Change the color for ticks */
    }

        .cross-icon {
            font-size: 20px; /* Adjust the size as needed */
            color: red; /* Change the color for crosses */
        }
        .popup-form {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 999;
    }

      .popup-content {
          background-color: #fff;
          width: 80%;
          max-width: 400px;
          margin: 10% auto;
          padding: 20px;
          position: relative;
          border-radius: 5px;
          box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      }

      .close {
          position: absolute;
          top: 10px;
          right: 10px;
          font-size: 20px;
          cursor: pointer;
      }
    </style>
</head>
  <body>
    <!-- Start of Navigation Bar -->
    <nav class="navbar dark navbar-expand-lg bg-body-tertiary py-3" data-bs-theme="dark">
      <div class="container">
        <a class="navbar-brand" href="index.html">Bridging Dreams</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <!-- ms-auto allows spacebetween the link "Bridging Dream" and others ul-->
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#home">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Tutor listing</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Dropdown
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="#">Something else here</a></li>
              </ul>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">About us</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Questions</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Instructions</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End of Navigation Bar -->
    <div class="container" id="app">
      <div class="row">
        <div class="col-lg-8">
          <!-- Display Pending Listing -->
          <div class="p-3 border bg-light mb-3">
            <h4 class="text-center">Your Requests</h4>
            <table class="table">
              <thead>
                  <tr>
                      <th>Parent's Name</th>
                      <th>Child's Name</th>
                      <th>Education Level</th>
                      <th>Date & Time</th>
                      <th>Action</th>
                  </tr>
              </thead>
              <tbody>
                <!-- Pending Listing -->
                <tr v-for="listing in pendingListings">
                  <td>{{listing.parentName}}</td>
                  <td>{{listing.childName}}</td>
                  <td>{{listing.eduLevel}}</td>
                  <td>{{listing.date}} {{listing.time}}</td>
                  <td><button class="btn btn-primary" data-bs-toggle="modal" :data-bs-target="'#' + listing.listingID">View</button></td>
                </tr>
                <!-- Modal to accept/reject -->
                <div v-for="listing of pendingListings">
                  <div class="modal fade" :id="listing.listingID" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                        <h5 class="modal-title" id="staticBackdropLabel">Book a Tuition Session with </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form>
                        <div class="modal-body">
                          <ul>
                            <li>{{listing.parentName}}</li>
                            <li>{{listing.childName}}</li>
                            <li>{{listing.childGender}}</li>
                            <li>{{listing.eduLevel}}</li>
                            <li v-if="listing.addNote != ''">
                              {{listing.addNote}}
                            </li>

                          </ul>
                        </div>
                        <div class="modal-footer">
                        <!-- <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> -->
                        <button v-on:click="handleAccept(listing.listingID)" data-bs-dismiss="modal"  type="submit" class="btn btn-primary">Accept</button> 
                        <button v-on:click="handleReject(listing.listingID)" data-bs-dismiss="modal"  type="submit" class="btn btn-primary">Reject</button> 
                        <!-- data-bs-dismiss="modal" to close modal after booking -->
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </tbody>
              </table>
          </div>
              <!-- Display Available Listing -->
              <div class="p-3 border bg-light">
                <h4 class="text-center">Your Listings</h4>
                <ul class="list-group list-group-flush text-center"> 
                  <li v-for="listing in availableListings" class="list-group-item border text-center mb-2 mx-2">
                      <strong>{{listing.date}}</strong>  <br>
                      {{listing.time}}
                  </li>
                </ul>
                <!-- Create New Listing Form --> 
                <!-- open button -->
                <div class="text-center">
                  <button type="button" class="btn btn-light text-center fs-4" data-bs-toggle="modal" data-bs-target="#modal"> + </button>  
                </div>
                <!-- Modal -->
                <div id="modal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                        <h5 class="modal-title" id="staticBackdropLabel">Viewing Pending Listing </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form @submit.prevent="handleNewListing()">
                          <div class="modal-body">
                            <label class="form-label" for="preferredDate">Date</label>
                            <input v-model="newListing.date" class="form-control" type="date" id="preferredDate" name="preferredDate">
                            <br>
                            <label class="form-label" for="preferredTime">Time</label>
                            <select v-model="newListing.time" class="form-control" id="preferredTime" name="preferredTime">
                                <option value="8AM-10AM">8:00 AM - 10:00 AM</option>
                                <option value="10PM-12PM">10:00 AM - 12:00 PM</option>
                                <option value="1PM-3PM">1:00 PM - 3:00 PM</option>
                                <option value="3PM-5PM">3:00 PM - 5:00 PM</option>
                                <option value="5PM-7PM">5:00 PM - 7:00 PM</option>
                                <option value="7PM-9PM">7:00 PM - 9:00 PM</option>
                            </select>
                            <br>
                          </div>
                        <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button data-bs-dismiss="modal"  type="submit" class="btn btn-primary">Create</button> 
                        <!-- data-bs-dismiss="modal" to close modal after booking -->
                        </div>
                      </form>
                    </div>
                    </div>
                </div>
              </div>
        </div>
        <!-- Display Confirmed Listing -->
        <div class="col-lg-3">
          <div class="p-3 border bg-light">
            <center><strong>Upcoming Sessions</strong></center>
            <br/>
            <div v-for="listing of confirmedListings" class="card">
              <div class="card-body">
                <h5 class="card-title">{{listing.childName}}</h5>
                <p class="card-text">{{listing.date}} {{listing.time}}</p>
                <a href="#" class="btn btn-primary" data-bs-toggle="modal" :data-bs-target="'#' + listing.listingID">View</a>
              </div>
            </div>
            <div v-for="listing of confirmedListings">
              <div class="modal fade" :id="listing.listingID" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">View confirmed listing</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form>
                    <div class="modal-body">
                      <ul>
                        <li>{{listing.parentName}}</li>
                        <li>{{listing.childName}}</li>
                        <li>{{listing.childGender}}</li>
                        <li>{{listing.eduLevel}}</li>
                        <li v-if="listing.addNote != ''">
                          {{listing.addNote}}
                        </li>

                      </ul>
                    </div>
                    <div class="modal-footer">
                    <!-- <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> -->
                    <button data-bs-dismiss="modal"  type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> 
                    <!-- data-bs-dismiss="modal" to close modal after booking -->
                    </div>
                  </form>
                </div>
              </div>
            </div>
            <br />
           
          
        </div> 
          </div>
      </div>
    </div>
  </div>
    <!-- <script >
    document.getElementById("showPopupButton").addEventListener("click", function () {
        document.getElementById("popupForm").style.display = "block";
    });

    document.getElementById("closePopupButton").addEventListener("click", function () {
        document.getElementById("popupForm").style.display = "none";
    });

  </script> -->
  <script src="tutorHomepage.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

</body>
</html>